<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø§Ù„Ø´Ø±Ù‚ÙŠØ© | Ø§Ù„Ù…Ø·ÙˆØ± Ù…Ø­Ù…Ø¯ Ø¹Ø¯ÙŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;900&display=swap');
        body { font-family: 'Tajawal', sans-serif; background: #f8fafc; }
        .hidden { display: none !important; }
        .app-card { background: white; border-radius: 1.5rem; box-shadow: 0 10px 25px rgba(0,0,0,0.05); }
        .telegram-post { background: white; border-right: 6px solid #1e3a8a; border-radius: 1rem; padding: 15px; margin-bottom: 15px; box-shadow: 0 4px 6px rgba(0,0,0,0.02); }
    </style>
</head>
<body class="min-h-screen">

    <div id="login-screen" class="max-w-md mx-auto my-10 p-4">
        <div class="app-card p-8 border-t-[10px] border-blue-900">
            <div class="text-center mb-6">
                <h1 class="text-3xl font-black text-blue-900">Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠØ© Ø§Ù„Ø´Ø±Ù‚ÙŠØ©</h1>
                <p class="text-xs font-bold text-amber-700 mt-1 uppercase">ØµØ§Ù†Ø¹ Ø§Ù„Ù…Ù†ØµØ©: Ù…Ø­Ù…Ø¯ Ø¹Ø¯ÙŠ Ù…Ø¤ÙŠØ¯</p>
            </div>

            <div class="space-y-4">
                <div class="text-center">
                    <img id="p-img" src="https://via.placeholder.com/120" class="w-24 h-24 rounded-full mx-auto border-4 border-blue-50 object-cover shadow-md">
                    <input type="file" id="u-file" class="hidden" onchange="preview(event)">
                    <button onclick="document.getElementById('u-file').click()" class="text-[10px] bg-blue-900 text-white px-4 py-1 rounded-full mt-2 font-bold italic">Ø§Ø±ÙØ¹ ØµÙˆØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ©</button>
                </div>

                <input type="text" id="u-name" class="w-full p-4 bg-gray-50 border rounded-2xl text-sm outline-none" placeholder="Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ù„Ø§Ø«ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„">
                <input type="tel" id="u-phone" class="w-full p-4 bg-gray-50 border rounded-2xl text-sm outline-none" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ">
                
                <select id="u-role" class="w-full p-4 bg-gray-100 border-none rounded-2xl font-bold text-sm" onchange="toggleUI()">
                    <option value="Ø·Ø§Ù„Ø¨">ğŸ“ Ø·Ø§Ù„Ø¨</option>
                    <option value="Ù…Ø¯Ø±Ø³">ğŸ‘¨â€ğŸ« Ù…Ø¯Ø±Ø³ Ù…Ø§Ø¯Ø©</option>
                    <option value="Ù…Ø¯ÙŠØ±">ğŸ›ï¸ Ù…Ø¯ÙŠØ± Ø§Ù„Ù…Ø¯Ø±Ø³Ø©</option>
                    <option value="Ù…Ø¹Ø§ÙˆÙ†">ğŸ“‹ Ø§Ù„Ù…Ø¹Ø§ÙˆÙ† Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</option>
                    <option value="ÙˆÙ„ÙŠ Ø§Ù…Ø±">ğŸ‘ª ÙˆÙ„ÙŠ Ø£Ù…Ø± Ø·Ø§Ù„Ø¨</option>
                </select>

                <div id="pass-div" class="hidden">
                    <input type="password" id="u-pass" class="w-full p-4 border-2 border-red-100 bg-red-50 rounded-2xl text-sm" placeholder="Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ Ø§Ù„Ø®Ø§Øµ">
                </div>

                <div id="stu-div" class="grid grid-cols-2 gap-2">
                    <select id="u-grade" class="p-4 bg-blue-50 border rounded-2xl text-sm font-bold"><option>Ø§Ù„Ø±Ø§Ø¨Ø¹</option><option>Ø§Ù„Ø®Ø§Ù…Ø³</option><option>Ø§Ù„Ø³Ø§Ø¯Ø³</option></select>
                    <select id="u-sec" class="p-4 bg-blue-50 border rounded-2xl text-sm font-bold">
                        <option>Ø£</option><option>Ø¨</option><option>Ø¬</option><option>Ø¯</option><option>Ù‡Ù€</option>
                        <option>Ùˆ</option><option>Ø²</option><option>Ø­</option><option>Ø·</option><option>ÙŠ</option>
                    </select>
                </div>

                <div id="tea-div" class="hidden space-y-3 border-t pt-4">
                    <input type="text" id="u-sub" class="w-full p-4 border rounded-2xl text-sm" placeholder="Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©">
                    <p class="text-[10px] font-bold text-blue-900">Ø§Ø®ØªØ± Ø§Ù„Ø´Ø¹Ø¨ Ø§Ù„ØªÙŠ ØªØ¯Ø±Ø³Ù‡Ø§ (ÙŠÙ…ÙƒÙ† Ø§Ø®ØªÙŠØ§Ø± Ø£ÙƒØ«Ø± Ù…Ù† Ø´Ø¹Ø¨Ø©):</p>
                    <div id="multi-sects" class="grid grid-cols-5 gap-2 bg-gray-50 p-3 rounded-xl"></div>
                </div>

                <button onclick="login()" class="w-full bg-blue-900 text-white py-5 rounded-2xl font-black text-lg shadow-xl hover:bg-blue-800 transition-all">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
            </div>
        </div>
    </div>

    <div id="app" class="hidden flex flex-col h-screen overflow-hidden">
        <header class="bg-blue-900 text-white p-5 flex justify-between items-center shadow-lg">
            <div class="flex items-center gap-3">
                <img id="nav-img" class="w-12 h-12 rounded-full border-2 border-white object-cover">
                <div><h2 id="nav-name" class="text-sm font-black"></h2><p id="nav-meta" class="text-[9px] text-blue-200 font-bold uppercase"></p></div>
            </div>
            <button onclick="logout()" class="bg-red-600 px-4 py-2 rounded-xl text-[10px] font-bold">Ø®Ø±ÙˆØ¬</button>
        </header>

        <main class="flex-grow overflow-y-auto p-4 pb-32">
            <div id="post-area" class="hidden app-card p-5 mb-6 border-2 border-blue-100">
                <textarea id="post-txt" class="w-full p-3 bg-gray-50 rounded-xl text-sm outline-none" rows="3" placeholder="Ø§Ù†Ø´Ø± Ø¯Ø±Ø³Ø§Ù‹ØŒ ØµÙˆØ±Ø©ØŒ Ø£Ùˆ ØªØ¨Ù„ÙŠØºØ§Ù‹..."></textarea>
                <div class="flex gap-2 mt-2">
                    <button class="bg-gray-100 p-2 rounded-xl text-[10px] flex-1">ğŸ“· ØµÙˆØ±Ø©</button>
                    <button class="bg-gray-100 p-2 rounded-xl text-[10px] flex-1">ğŸ“ Ù…Ù„Ù</button>
                    <button onclick="publish()" class="bg-blue-900 text-white p-2 rounded-xl flex-[2] text-[10px] font-bold">Ù†Ø´Ø± Ø§Ù„Ø¢Ù†</button>
                </div>
            </div>
            <div id="feed" class="space-y-4"></div>
        </main>

        <nav class="fixed bottom-0 left-0 right-0 bg-white border-t flex justify-around p-4 shadow-2xl z-50">
            <button class="flex flex-col items-center gap-1"><span class="text-2xl">ğŸ“¢</span><span class="text-[10px] font-black">Ø§Ù„Ù‚Ù†ÙˆØ§Øª</span></button>
            <button id="chat-btn" class="flex flex-col items-center gap-1"><span class="text-2xl">ğŸ’¬</span><span class="text-[10px] font-black">Ø§Ù„Ø¯Ø±Ø¯Ø´Ø©</span></button>
            <button id="admin-btn" class="hidden flex flex-col items-center gap-1"><span class="text-2xl">ğŸ“Š</span><span class="text-[10px] font-black">Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©</span></button>
        </nav>
    </div>

    <script>
        let u = null;
        const KEYS = {"Ù…Ø¯ÙŠØ±":"1010", "Ù…Ø¹Ø§ÙˆÙ†":"2020", "Ù…Ø¯Ø±Ø³":"333"};
        const SLIST = ["Ø£","Ø¨","Ø¬","Ø¯","Ù‡Ù€","Ùˆ","Ø²","Ø­","Ø·","ÙŠ"];

        SLIST.forEach(s => {
            document.getElementById('multi-sects').innerHTML += `<label class="text-[10px] flex items-center gap-1 font-bold cursor-pointer"><input type="checkbox" value="${s}" name="tSects"> ${s}</label>`;
        });

        window.onload = () => {
            const saved = localStorage.getItem('shrqia_final');
            if(saved) { u = JSON.parse(saved); start(); }
        }

        function preview(e) {
            const r = new FileReader();
            r.onload = () => document.getElementById('p-img').src = r.result;
            r.readAsDataURL(e.target.files[0]);
        }

        function toggleUI() {
            const r = document.getElementById('u-role').value;
            document.getElementById('pass-div').classList.toggle('hidden', r === 'Ø·Ø§Ù„Ø¨' || r === 'ÙˆÙ„ÙŠ Ø§Ù…Ø±');
            document.getElementById('tea-div').classList.toggle('hidden', r !== 'Ù…Ø¯Ø±Ø³');
        }

        function login() {
            const role = document.getElementById('u-role').value;
            const pass = document.getElementById('u-pass').value;
            const name = document.getElementById('u-name').value;
            const img = document.getElementById('p-img').src;

            if(!name || img.includes('placeholder')) return alert("Ø§Ù„Ø§Ø³Ù… ÙˆØµÙˆØ±Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ Ù…Ø·Ù„ÙˆØ¨Ø©!");
            if(KEYS[role] && pass !== KEYS[role]) return alert("Ø§Ù„Ø±Ù…Ø² Ø§Ù„Ø³Ø±ÙŠ ØºÙŠØ± ØµØ­ÙŠØ­!");

            let tSects = [];
            document.querySelectorAll('input[name="tSects"]:checked').forEach(c => tSects.push(c.value));

            u = { name, role, img, grade: document.getElementById('u-grade').value, sec: document.getElementById('u-sec').value, sub: document.getElementById('u-sub').value, tSects };
            localStorage.setItem('shrqia_final', JSON.stringify(u));
            start();
        }

        function start() {
            document.getElementById('login-screen').classList.add('hidden');
            document.getElementById('app').classList.remove('hidden');
            document.getElementById('nav-img').src = u.img;
            document.getElementById('nav-name').innerText = u.name;
            document.getElementById('nav-meta').innerText = `${u.role} | ${u.grade}-${u.sec}`;

            if(u.role !== 'Ø·Ø§Ù„Ø¨' && u.role !== 'ÙˆÙ„ÙŠ Ø§Ù…Ø±') document.getElementById('post-area').classList.remove('hidden');
            if(u.role === 'Ù…Ø¯ÙŠØ±' || u.role === 'Ù…Ø¹Ø§ÙˆÙ†') document.getElementById('admin-btn').classList.remove('hidden');
            if(u.role === 'ÙˆÙ„ÙŠ Ø§Ù…Ø±') document.getElementById('chat-btn').classList.add('hidden');
        }

        function publish() {
            const txt = document.getElementById('post-txt').value; if(!txt) return;
            const html = `<div class="telegram-post">
                <b class="text-xs text-blue-900">${u.role === 'Ù…Ø¯Ø±Ø³' ? 'Ù‚Ù†Ø§Ø© '+u.sub : 'Ø§Ù„Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø±ÙƒØ²ÙŠØ©'}</b>
                <p class="text-sm mt-1 text-gray-700 leading-relaxed">${txt}</p>
                <div class="flex justify-between mt-3 text-[8px] font-bold text-gray-400 italic">
                    <span>Ø§Ù„Ù…Ø±Ø³Ù„: ${u.name}</span>
                    <span>Ø§Ù„Ø´Ø¹Ø¨: ${u.role === 'Ù…Ø¯Ø±Ø³' ? u.tSects.join(', ') : 'Ø§Ù„ÙƒÙ„'}</span>
                </div>
            </div>`;
            document.getElementById('feed').insertAdjacentHTML('afterbegin', html);
            document.getElementById('post-txt').value = "";
        }

        function logout() { localStorage.removeItem('shrqia_final'); location.reload(); }
    </script>
</body>
</html>
